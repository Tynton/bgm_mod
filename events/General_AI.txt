namespace = general_ai



##############STABILITY

country_event = {
	id = general_ai.11
	title = "general_ai.n.11"
	desc = "general_ai.d.11"
	picture = ANGRY_MOB_eventPicture

	
	
	trigger = {
		#ai = yes
		#NOT = {
		#	stability = 1
		#}
		#adm_power = 100
		always = no
	}

	mean_time_to_happen = {
		months = 16
		
		modifier = {
			factor = 0.1
			NOT = {
				stability = -1
			}
		}
		
		modifier = {
			factor = 0.1
			NOT = {
				stability = -2
			}
		}
	}
	
	option = {
		name = "general_ai.11.a"
		#add_adm_power = -75
		#add_stability = 1
	}
}

##############manpower

country_event = {
	id = general_ai.13
	title = "general_ai.n.13"
	desc = "general_ai.d.13"
	picture = ANGRY_MOB_eventPicture

	
	
	trigger = {
		ai = yes
		is_at_war = yes
		NOT = {
			manpower_percentage = 0.2
		}
		army_professionalism = 0.10
	}

	mean_time_to_happen = {
		months = 4
		
		modifier = {
			factor = 0.6
			NOT = {
				manpower_percentage = 0.15
			}
		}
		
		modifier = {
			factor = 0.3
			NOT = {
				manpower_percentage = 0.1
			}
		}
		
		modifier = {
			factor = 0.00001
			NOT = {
				manpower_percentage = 0.05
			}
		}
	}
	
	option = {
		name = "general_ai.11.a"
		add_army_professionalism = -0.05
		add_yearly_manpower = 1.0
	}
}

##############strengthen govt

country_event = {
	id = general_ai.14
	title = "general_ai.n.14"
	desc = "general_ai.d.14"
	picture = ANGRY_MOB_eventPicture

	
	
	trigger = {
		ai = yes
		NOT = { legitimacy_equivalent = 99 }
		OR = {
			AND = {
				mil_power = 950
			}
			AND = {
				has_country_flag = has_power_struggle
				NOT = {
					legitimacy = 75
				}
			}
			AND = {
				NOT = { absolutism = 100 }
				NOT = {
					OR = {
						current_age = age_of_discovery
						current_age = age_of_reformation
					}
				}
			}
		}
		mil_power = 75
	}

	mean_time_to_happen = {
		months = 8
	}
	
	option = {
		name = "general_ai.11.a"
		add_legitimacy = 10
		add_devotion = 10
		add_horde_unity = 10
		add_republican_tradition = 3
		add_mil_power = -75
	}
}

##############PERSONALITY CHANGES

#Peacetime, buildup

country_event = {
	id = general_ai.15
	title = "general_ai.n.15"
	desc = "general_ai.d.15"
	picture = ANGRY_MOB_eventPicture

	
	
	trigger = {
		ai = yes
		is_emperor_of_china = no
		is_emperor = no
		OR = {
			religion_group = muslim
			capital_scope = {
				continent = europe
			}
		}
		OR = {
			num_of_loans = 3
			NOT = {
				stability = 0
			}
			NOT = {
				capital_scope = {
					region = italy_region
				}
				adm_tech = 25
			}
			AND = {
				all_owned_province = {
					is_prosperous = yes 
				}
				years_of_income = 1.5
				is_part_of_hre = no
				is_great_power = no
			}
			is_subject = yes
			any_neighbor_country = {
				NOT = {
					army_size = ROOT
				}
			}
		}
		
		NOT = {
			OR = {
				personality = ai_colonialist
				personality = ai_capitalist
			}
		}
		NOT = { personality = ai_capitalist }
	}

	mean_time_to_happen = {
		months = 12
	}
	
	option = {
		name = "general_ai.15.a"
		set_ai_personality = {
			personality = ai_capitalist
			locked = no
		}
		if = {
			limit = {
				ai = yes
				NOT = { has_country_modifier = lower_maintenance }
			}
			add_country_modifier = {
				name = lower_maintenance
				duration = -1
			}
		}
	}
}

#Confident in own ability

country_event = {
	id = general_ai.16
	title = none
	desc = none
	picture = none

	
	
	trigger = {
		ai = yes
		is_subject = no
		is_emperor_of_china = no
		is_emperor = no
		NOT = {
			religion = anabaptist
		}
		NOT = {
			ruler_has_personality = architectural_visionary_personality
		}
		OR = {
			religion_group = muslim
			capital_scope = {
				continent = europe
			}
		}
		#NOT = {
		#	has_country_flag = player_on_continent
		#}
		NOT = {
			OR = {
				has_idea_group = expansion_ideas
				has_idea_group = exploration_ideas
			}
		}
		NOT = {
			personality = ai_militarist
		}
		
		OR = {
			all_owned_province = {
				is_prosperous = yes 
			}
			years_of_income = 1.5
			is_part_of_hre = yes
			is_great_power = yes
		}
		
		NOT = {
			OR = {
				num_of_loans = 3
				NOT = {
					stability = 0
				}
			}
		}
		NOT = { personality = ai_militarist }
	}

	mean_time_to_happen = {
		months = 12
	}
	
	option = {
		name = "general_ai.16.a"
		set_ai_personality = {
			personality = ai_militarist
			locked = no
		}
		if = {
			limit = {
				has_country_modifier = lower_maintenance
			}
			remove_country_modifier = lower_maintenance
		}
	}
}

#Confident in own ability, colonialism

country_event = {
	id = general_ai.17
	title = none
	desc = none
	picture = none

	
	
	trigger = {
		ai = yes
		is_subject = no
		is_emperor_of_china = no
		NOT = {
			ruler_has_personality = architectural_visionary_personality
		}
		OR = {
			has_idea_group = expansion_ideas
			has_idea_group = exploration_ideas
		}
		OR = {
			religion_group = muslim
			capital_scope = {
				continent = europe
			}
		}
		
		OR = {
			AND = {
				NOT = {
					religion = anabaptist
				}
				NOT = {
					personality = ai_colonialist
				}
				
				OR = {
					all_owned_province = {
						is_prosperous = yes 
					}
					years_of_income = 1.5
				}
				
				NOT = {
					OR = {
						num_of_loans = 3
						NOT = {
							stability = 0
						}
					}
				}
			}
			AND = {
				capital_scope = {
					region = italy_region
				}
				adm_tech = 25
			}
		}
		NOT = { personality = ai_colonialist }
	}

	mean_time_to_happen = {
		months = 12
	}
	
	option = {
		name = "general_ai.17.a"
		set_ai_personality = {
			personality = ai_colonialist
			locked = no
		}
		if = {
			limit = {
				has_country_modifier = lower_maintenance
			}
			remove_country_modifier = lower_maintenance
		}
	}
}

#reduce war exhaustion

country_event = {
	id = general_ai.18
	title = none
	desc = none
	picture = none

	
	
	trigger = {
		ai = yes
		war_exhaustion = 2
		
		dip_power = 100
		
	}

	mean_time_to_happen = {
		months = 24
		
		modifier = {
			factor = 0.0001
			war_exhaustion = 5
		}
	}
	
	option = {
		name = "general_ai.18.a"
		add_war_exhaustion = -5
		add_dip_power = -75
	}
}

#increase mercantilism

country_event = {
	id = general_ai.19
	title = none
	desc = none
	picture = none

	
	
	trigger = {
		always = no #testing this
		ai = yes
		years_of_income = 2
		current_income_balance = 5
		#dip_power = 100
		NOT = {
			OR = {
				mercantilism = 100
				adm_tech = 20
			}
		}
	}

	mean_time_to_happen = {
		months = 120
	}
	
	option = {
		name = "general_ai.19.a"
		add_mercantilism = 4
		add_years_of_income = -0.5
	}
}

#increase mercantilism, manually

country_event = {
	id = general_ai.20
	title = none
	desc = none
	picture = none

	
	
	trigger = {
		ai = yes
		NOT = {
			mercantilism = 100
		}
		dip_power = 950
	}

	mean_time_to_happen = {
		months = 3
	}
	
	option = {
		name = "general_ai.19.a"
		add_mercantilism = 1
		add_dip_power = -100
	}
}

country_event = {
	id = general_ai.21
	title = none
	desc = none
	picture = ANGRY_MOB_eventPicture

	
	
	trigger = {
		ai = yes
		government = monarchy
		NOT = { has_country_modifier = burgundian_succession_crisis }
		prestige = 0
		has_heir = yes
		heir_age = 15
		variable_arithmetic_trigger = {
            export_to_variable = { which = diff value = heir_adm }
            export_to_variable = { which = temp value = heir_dip }
            change_variable = { which = diff value = temp }
            export_to_variable = { which = temp value = heir_mil }
            change_variable = { which = diff value = temp }
            export_to_variable = { which = temp value = adm }
            subtract_variable = { which = diff value = temp }
            export_to_variable = { which = temp value = dip }
            subtract_variable = { which = diff value = temp }
            export_to_variable = { which = temp value = mil }
            subtract_variable = { which = diff value = temp }
            check_variable = { which = diff value = 6 }
        }
	}

	mean_time_to_happen = {
		months = 12
	}
	
	option = {
		name = none
		add_prestige = -50
		kill_ruler = yes
	}
}

province_event = {
	id = general_ai.23
	title = none
	desc = none
	picture = ANGRY_MOB_eventPicture

	
	
	trigger = {
		always = no #invade them instead
		owner = {
			treasury = 100
			NOT = { num_of_loans = 1 }
			ai = yes
			dip_tech = 5
		}
		has_port = yes
		num_free_building_slots = 1
		NOT = {
			religion = sunni
		}
		OR = {
			region = italy_region
			area = languedoc_area
			area = east_languedoc_area
			area = provence_area
			region = iberia_region
		}
		NOT = { has_building = coastal_defence }
		NOT = {
			OR = {
				has_construction = core
				has_construction = building
				has_construction = culture
			}
		}
	}

	mean_time_to_happen = {
		months = 6
		
		modifier = {
			factor = 0.5
			has_terrain = farmlands
		}
	}
	
	option = {
		name = none
		add_building_construction = {
			building = coastal_defence
			speed = 1.0
			cost = 1.0
		}
	}
}

#Fall of the Mamluks
country_event = {
	id = general_ai.25
	title = general_ai.25.t
	desc = general_ai.25.d
	picture = GREAT_BUILDING_eventPicture

	major = yes

	trigger = {
		TUR = {
			is_in_war = {
				attacker_leader = ROOT
				defender_leader = MAM
				war_score = 50
			}
		}
		MAM = { ai = yes }
	}

	option = {
		MAM = {
			every_owned_province = {
				add_core = TUR
				add_local_autonomy = 100
				add_devastation = 10
			}
		}
		TUR = {
			inherit = MAM
		}
	}
}

#claim fabrication
country_event = {
	id = general_ai.26
	title = none
	desc = none
	picture = GREAT_BUILDING_eventPicture

	

	trigger = {
		ai = yes
	}

	mean_time_to_happen = {
		months = 250

		modifier = {
			factor = 0.25
			OR = {
				culture_group = french
				culture_group = occitan
				culture_group = iberian
				
				culture_group = latin
			}
			any_neighbor_country = {
				OR = {
					
					culture_group = latin
				}
			}
		}

		modifier = {
			factor = 0.25
			is_part_of_hre = yes
			any_neighbor_country = {
				is_part_of_hre = yes
			}
		}

		modifier = {
			factor = 0.5
			any_neighbor_country = {
				NOT = {
					army_strength = {
						who = ROOT
						value = 1
					}
				}
			}
		}
	}

	option = {
		random_neighbor_country = {
			random_owned_province = {
				limit = {
					any_neighbor_province = {
						owned_by = ROOT
					}
					NOT = {
						is_claim = ROOT
					}
				}
				add_claim = ROOT
			}
		}
	}
}

#french claim italy
country_event = {
	id = general_ai.27
	title = none
	desc = none
	picture = GREAT_BUILDING_eventPicture

	

	trigger = {
		ai = yes
		OR = {
			culture_group = french
			culture_group = occitan
			
			culture_group = latin
		}
		any_neighbor_country = {
			OR = {
				
				culture_group = latin
			}
		}
	}

	mean_time_to_happen = {
		months = 100


		modifier = {
			factor = 0.25
			is_part_of_hre = no
			any_neighbor_country = {
				is_part_of_hre = no
			}
		}

		modifier = {
			factor = 0.5
			any_neighbor_country = {
				NOT = {
					army_strength = {
						who = ROOT
						value = 1
					}
				}
			}
		}
	}

	option = {
		random_neighbor_country = {
			limit = {
				OR = {
					
					culture_group = latin
				}
			}
			random_owned_province = {
				limit = {
					any_neighbor_province = {
						owned_by = ROOT
					}
					NOT = {
						is_claim = ROOT
					}
				}
				add_claim = ROOT
			}
		}
	}
}

#remove now useless ideas
country_event = {
	id = general_ai.28
	title = none
	desc = none
	picture = GREAT_BUILDING_eventPicture

	

	trigger = {
		ai = yes
		adm_tech = 42
	}

	mean_time_to_happen = {
		months = 8
	}
	option = {
		if = {
			limit = {
				has_idea_group = exploration_ideas
			}
			remove_idea_group = exploration_ideas
			add_dip_power = 400
		}
		if = {
			limit = {
				has_idea_group = religious_ideas
			}
			remove_idea_group = religious_ideas
			add_dip_power = 400
		}
		if = {
			limit = {
				has_idea_group = expansion_ideas
			}
			remove_idea_group = expansion_ideas
			add_adm_power = 400
		}
	}
}

#disinherit heir if heir incompetent
country_event = {
	id = general_ai.29
	title = none
	desc = none
	picture = none

	

	trigger = {
		ai = yes
		NOT = { has_country_modifier = burgundian_succession_crisis }
		NOT = { has_heir_flag = is_charles_of_burg_flag }
		prestige = 0
		has_heir = yes

		NOT = {
			OR = {
				ruler_age = 38
				ruler_has_personality = infertile_personality
			}
		}

		heir_dynasty = ROOT
		variable_arithmetic_trigger = {
			export_to_variable = {
				which = heirskill
				value = heir_adm
			}
			export_to_variable = {
				which = heirskill_dip
				value = heir_dip
			}
			export_to_variable = {
				which = heirskill_mil
				value = heir_mil
			}
			change_variable = { which = heirskill which = heirskill_dip }
			change_variable = { which = heirskill which = heirskill_mil }
			NOT = {
				check_variable = {
					which = heirskill
					value = 9
				}
			}
		}
	}

	mean_time_to_happen = {
		months = 8
	}
	option = {
		kill_heir = {
			allow_new_heir = no
		}
		add_prestige = -25
	}
}

#destroy ramparts if no fort
province_event = {
	id = general_ai.30
	title = none
	desc = none
	picture = GREAT_BUILDING_eventPicture

	

	trigger = {
		owner = {
			ai = yes
		}
		NOT = {
			fort_level = 1
		}
		has_building = ramparts
	}

	mean_time_to_happen = {
		months = 8
	}
	option = {
		remove_building = ramparts
	}
}

#######################
####NON EUROPEAN AI####
#######################

country_event = {
	id = general_ai.31
	title = none
	desc = none
	picture = none

	
	
	trigger = {
		ai = yes
		NOT = { personality = ai_diplomat }
		capital_scope = {
			NOT = {
				continent = europe
			}
		}
		NOT = {
			religion_group = muslim
		}
	}

	mean_time_to_happen = {
		months = 8
	}
	
	option = {
		name = "general_ai.17.a"
		set_ai_personality = {
			personality = ai_diplomat
			locked = no
		}
	}
}

#no idea/dev if not max tech
country_event = {
	id = general_ai.32
	title = none
	desc = none
	picture = GREAT_BUILDING_eventPicture

	

	trigger = {
		ai = yes
		OR = {
			has_country_modifier = stop_idea
			has_country_modifier = stop_dev
		}
	}

	mean_time_to_happen = {
		months = 8
	}
	option = {
		remove_country_modifier = stop_idea
		remove_country_modifier = stop_dev
	}
}

#no idea/dev if not max tech
country_event = {
	id = general_ai.33
	title = none
	desc = none
	picture = GREAT_BUILDING_eventPicture

	

	trigger = {
		ai = yes
		#has_country_modifier = ai_get_tech
		OR = {
			NOT = { adm_tech = 45 }
			AND = {
				has_idea_group = postmodern_ideas
				NOT = { full_idea_group = postmodern_ideas }
			}
			AND = {
				has_idea_group = exploration_ideas
				NOT = { full_idea_group = exploration_ideas }
			}
			AND = {
				has_idea_group = expansion_ideas
				NOT = { full_idea_group = expansion_ideas }
			}
			AND = {
				has_idea_group = quantity_ideas
				NOT = { full_idea_group = quantity_ideas }
			}
		}
		#NOT = {
		#	OR = {
		#		any_neighbor_country = {
		#			mil_tech = ROOT
		#		}
		#		any_rival_country = {
		#			mil_tech = ROOT
		#		}
		#		any_enemy_country = {
		#			mil_tech = ROOT
		#		}
		#	}
		#}
	}

	mean_time_to_happen = {
		years = 18

		modifier = {
			factor = 0.0001
			OR = {
				AND = {
					has_idea_group = postmodern_ideas
					NOT = { full_idea_group = postmodern_ideas }
				}
				AND = {
					has_idea_group = exploration_ideas
					NOT = { full_idea_group = exploration_ideas }
				}
				AND = {
					has_idea_group = expansion_ideas
					NOT = { full_idea_group = expansion_ideas }
				}
				AND = {
					has_idea_group = quantity_ideas
					NOT = { full_idea_group = quantity_ideas }
				}
			}
		}
	}
	option = {
		add_country_modifier = { 
			name = allow_idea
			duration = 3
		}
	}
}

#use balance of power CB
country_event = {
	id = general_ai.39
	title = none
	desc = none
	picture = GREAT_BUILDING_eventPicture

	hidden = yes

	trigger = {
		NOT = {
			has_global_flag = had_peace_bgm
		}
		any_country = {
			ai = yes
			OR = {
				ai_attitude = {
					who = ROOT
					attitude = attitude_threatened
				}
				ai_attitude = {
					who = ROOT
					attitude = attitude_outraged
				}
				ai_attitude = {
					who = ROOT
					attitude = attitude_hostile
				}
			}
			is_subject = no
			has_casus_belli = {
				type = cb_balance_power
				target = ROOT
			}
			military_strength = {
				who = ROOT
				value = 0.2
			}
			NOT = { 
				OR = {
					truce_with = ROOT
					alliance_with = ROOT
					marriage_with = ROOT
					is_subject_of = ROOT
					overlord_of = ROOT
					religion = anabaptist
				}
			}
			capital_scope = {
				continent = ROOT
				NOT = {
					ROOT = {
						capital_scope = {
							region = british_isles_region
						}
						any_owned_province = {
							OR = {
								superregion = eastern_europe_superregion
								region = low_countries_region
								region = france_region
								region = north_german_region
								region = south_german_region
								region = italy_region
								region = iberia_region
							}
						}
					}
				}
			}
		}
	}

	mean_time_to_happen = {
		months = 250

		modifier = {
			factor = 0.001
			ROOT = {
				is_in_war = {
					defender_leader = ROOT
				}
			}
		}
	}
	option = {
		
		random_country = {
			limit = {
				ai = yes
				OR = {
					ai_attitude = {
						who = ROOT
						attitude = attitude_threatened
					}
					ai_attitude = {
						who = ROOT
						attitude = attitude_outraged
					}
					ai_attitude = {
						who = ROOT
						attitude = attitude_hostile
					}
				}
				is_subject = no
				has_casus_belli = {
					type = cb_balance_power
					target = ROOT
				}
				NOT = { 
					OR = {
						truce_with = ROOT
						alliance_with = ROOT
						marriage_with = ROOT
						is_subject_of = ROOT
						overlord_of = ROOT
						religion = anabaptist
					}
				}
				capital_scope = {
					continent = ROOT
				}
			}
			declare_war_with_cb = {
				casus_belli = cb_balance_power
				who = ROOT
			}
		}
	}
}

#Break alliance if has nationalist CB

country_event = {
	id = general_ai.40
	title = none
	desc = none
	picture = GREAT_BUILDING_eventPicture

	

	trigger = {
		ai = yes
		any_country = {
			alliance_with = ROOT
			culture_group = ROOT
			ai = yes
			has_casus_belli = {
				type = cb_nationalist
				target = ROOT
			}
		}
	}

	mean_time_to_happen = {
		years = 18

		modifier = {
			factor = 0.0001
			OR = {
				AND = {
					has_idea_group = postmodern_ideas
					NOT = { full_idea_group = postmodern_ideas }
				}
				AND = {
					has_idea_group = exploration_ideas
					NOT = { full_idea_group = exploration_ideas }
				}
				AND = {
					has_idea_group = expansion_ideas
					NOT = { full_idea_group = expansion_ideas }
				}
				AND = {
					has_idea_group = quantity_ideas
					NOT = { full_idea_group = quantity_ideas }
				}
			}
		}
	}
	option = {
		every_country = {
			limit = {
				alliance_with = ROOT
				culture_group = ROOT
				ai = yes
				has_casus_belli = {
					type = cb_nationalist
					target = ROOT
				}
			}
			break_alliance = ROOT
		}
	}
}

country_event = {
	id = general_ai.46
	title = none
	desc = none
	picture = none
	
	hidden = yes
	
	trigger = {
		ai = yes
		inflation = 2
		adm_power = 75
	}

	mean_time_to_happen = {
		months = 3
	}
	
	option = {
		name = "none"
		
		add_adm_power = -75
		add_inflation = -2
	}
}

#Build alliances with similar sized powers who are also friendly

country_event = {
	id = general_ai.47
	title = none
	desc = none
	picture = none
	
	hidden = yes
	
	trigger = {
		is_at_war = no
		ai = yes
		num_of_free_diplomatic_relations = 1 

		any_country = {
			is_great_power = no
			is_at_war = no
			ai = yes
			army_size = 35
			num_of_free_diplomatic_relations = 1 

			NOT = { truce_with = ROOT } #closest approximation to annulled treaties
			NOT = { alliance_with = ROOT }
			has_opinion = {
				who = ROOT
				value = -25
			}
			OR = {
				has_opinion = {
					who = ROOT
					value = 100
				}
				ai_attitude = {
					who = ROOT
					attitude = attitude_friendly
				}
			}
			army_strength = {
				who = ROOT
				value = 0.45
			}
			NOT = {
				army_strength = {
					who = ROOT
					value = 4
				}
			}
		}
	}

	mean_time_to_happen = {
		months = 15

		modifier = {
			factor = 5
			is_great_power = yes
			NOT = {
				num_of_allies = 3
			}
		}

		modifier = {
			factor = 100
			any_country = {
				has_opinion_modifier = {
					who = ROOT
					modifier = allied_to_rival
				}

				ai = yes
				army_size = 35
				num_of_free_diplomatic_relations = 1 

				NOT = { truce_with = ROOT } #closest approximation to annulled treaties
				NOT = { alliance_with = ROOT }
				has_opinion = {
					who = ROOT
					value = -25
				}
				OR = {
					has_opinion = {
						who = ROOT
						value = 100
					}
					ai_attitude = {
						who = ROOT
						attitude = attitude_friendly
					}
				}
				army_strength = {
					who = ROOT
					value = 0.45
				}
				NOT = {
					army_strength = {
						who = ROOT
						value = 4
					}
				}
			}
		}
	}
	
	option = {
		name = "none"
		
		random_country = {
			limit = {
				is_great_power = no
				is_at_war = no
				ai = yes
				num_of_free_diplomatic_relations = 1
				NOT = { truce_with = ROOT } #closest approximation to annulled treaties
				NOT = { alliance_with = ROOT }
				has_opinion = {
					who = ROOT
					value = -25
				}
				OR = {
					has_opinion = {
						who = ROOT
						value = 100
					}
					ai_attitude = {
						who = ROOT
						attitude = attitude_friendly
					}
				}
				army_strength = {
					who = ROOT
					value = 0.45
				}
				NOT = {
					army_strength = {
						who = ROOT
						value = 4
					}
				}
			}
			create_alliance = ROOT
		}
	}
}

#however if the AI spots a high value target it may disregard upkeep

country_event = {
	id = general_ai.48
	title = none
	desc = none
	picture = none
	
	hidden = yes
	
	trigger = {
		ai = yes
		is_at_war = no
		OR = {
			is_great_power = yes
			is_emperor = yes
		}
		any_country = {
			ai = yes
			OR = {
				is_great_power = yes
				is_emperor = yes
			}
			NOT = { truce_with = ROOT } #closest approximation to annulled treaties
			NOT = { alliance_with = ROOT }
			NOT = {
				any_ally = {
					OR = {
						is_rival = ROOT
						is_enemy = ROOT
					}
				}
			}
			has_opinion = {
				who = ROOT
				value = -25
			}
			OR = {
				has_opinion = {
					who = ROOT
					value = 100
				}
				ai_attitude = {
					who = ROOT
					attitude = attitude_friendly
				}
			}
			army_strength = {
				who = ROOT
				value = 1
			}
			NOT = {
				army_strength = {
					who = ROOT
					value = 4
				}
			}
		}
	}

	mean_time_to_happen = {
		months = 8

		modifier = {
			factor = 0.0001
			NOT = {
				is_year = 1445 #start trying to build alliances ASAP
			}
		}

		modifier = {
			factor = 12
			NOT = { num_of_free_diplomatic_relations = 1 }
		}
	}
	
	option = {
		name = "none"
		
		random_country = {
			limit = {
				ai = yes
				OR = {
					is_great_power = yes
					is_emperor = yes
				}
				NOT = { truce_with = ROOT } #closest approximation to annulled treaties
				NOT = { alliance_with = ROOT }
				has_opinion = {
					who = ROOT
					value = -25
				}
				OR = {
					has_opinion = {
						who = ROOT
						value = 100
					}
					ai_attitude = {
						who = ROOT
						attitude = attitude_friendly
					}
				}
				army_strength = {
					who = ROOT
					value = 1
				}
				NOT = {
					army_strength = {
						who = ROOT
						value = 4
					}
				}
			}
			create_alliance = ROOT
		}

		if = {
			limit = {
				NOT = { num_of_free_diplomatic_relations = 1 }
				any_ally = {
					ai = yes
					NOT = {
						military_strength = {
							who = ROOT
							value = 0.33
						}
					}
				}
			}
			random_ally = {
				limit = {
					ai = yes
					NOT = {
						military_strength = {
							who = ROOT
							value = 0.33
						}
					}
				}
				break_alliance = ROOT
			}
		}
	}
}

#seek independence using all of the overlord's enemies for assistance

country_event = {
	id = general_ai.49
	title = none
	desc = none
	picture = none
	
	hidden = yes
	
	trigger = {
		is_year = 1450 #so as to not be unfair right off the bat
		liberty_desire = 50
		ai = yes
		is_subject = yes
		NOT = {
			OR = {
				is_subject_of_type = tributary_state
				is_subject_of_type = pact_member
				is_subject_of_type = sister_republic
			}
		}
		is_at_war = no
		overlord = {
			any_known_country = {
				NOT = {
					is_supporting_independence_of = ROOT
				}
				ai = yes
				OR = {
					is_rival = PREV
					ai_attitude = {
						who = PREV
						attitude = attitude_outraged
					}
					ai_attitude = {
						who = PREV
						attitude = attitude_hostile
					}
				}
				#is_at_war = no
				NOT = { truce_with = ROOT }
				NOT = { truce_with = PREV }
				has_opinion = {
					who = ROOT
					value = -25
				}
			}
		}
	}

	mean_time_to_happen = {
		months = 36

		modifier = {
			factor = 0.001
			overlord = {
				is_hegemon = yes
			}
		}
		modifier = {
			factor = 0.1
			overlord = {
				NOT = {
					great_power_rank = 6
				}
			}
		}
	}
	
	option = {
		name = "none"
		overlord = {
            save_event_target_as = root_overlord
        }
		random_known_country = {
			limit = {
				NOT = {
					is_supporting_independence_of = ROOT
				}
				ai = yes
				OR = {
					is_rival = event_target:root_overlord
					ai_attitude = {
						who = event_target:root_overlord
						attitude = attitude_outraged
					}
					ai_attitude = {
						who = event_target:root_overlord
						attitude = attitude_hostile
					}
				}
				is_at_war = no
				NOT = { truce_with = ROOT }
				NOT = { truce_with = event_target:root_overlord }
				has_opinion = {
					who = ROOT
					value = -25
				}
			}
			support_independence_of = ROOT
		}
	}
}

#if the country who has the fraticelli clerical zeal modifier is ai, it will seek to kill the pope ASAP

country_event = {
	id = general_ai.50
	title = none
	desc = none
	picture = none
	
	hidden = yes
	
	trigger = {
		ai = yes
		has_country_modifier = fraticelli_clerics
		is_at_war = no
		
		PAP = {
			NOT = {
				army_strength = {
					who = ROOT
					value = 0.75
				}
			}
			OR = {
				NOT = {
					any_ally = {
						army_strength = {
							who = ROOT
							value = 0.5
						}
					}
				}
				NOT = {
					num_of_allies = 1
				}
			}
		}
	}

	mean_time_to_happen = {
		months = 8
	}
	
	option = {
		name = "none"
		
		ROOT = {
			declare_war_with_cb = {
				casus_belli = cb_conquest
				who = PAP
				war_goal_province = 118
			}
		}
	}
}

#if liberty desire is high enough, declare independence war

country_event = {
	id = general_ai.51
	title = none
	desc = none
	picture = none
	
	hidden = yes
	
	trigger = {
		ai = yes
		liberty_desire = 100
		is_at_war = no
		
		overlord = {
			OR = {
				any_country = {
					is_supporting_independence_of = ROOT
					military_strength = {
						who = PREV
						value = 2
					}
				}
				calc_true_if = {
					amount = 2
					all_country = {
						is_supporting_independence_of = ROOT
						military_strength = {
							who = PREV
							value = 1
						}
					}
				}
				calc_true_if = {
					amount = 3
					all_country = {
						is_supporting_independence_of = ROOT
						military_strength = {
							who = PREV
							value = 0.75
						}
					}
				}
				calc_true_if = {
					amount = 4
					all_country = {
						is_supporting_independence_of = ROOT
						military_strength = {
							who = PREV
							value = 0.5
						}
					}
				}
			}
		}
	}

	mean_time_to_happen = {
		months = 8
	}
	
	option = {
		name = "none"
		
		ROOT = {
			declare_war_with_cb = {
				casus_belli = cb_independence_war
				who = overlord
			}
			every_country = {
				limit = {
					is_supporting_independence_of = ROOT
				}
				join_all_offensive_wars_of = ROOT
			}
		}
	}
}

#remove alliances with countries whose army is far weaker than ours

country_event = {
	id = general_ai.52
	title = none
	desc = none
	picture = none
	
	hidden = yes
	
	trigger = {
		ai = yes
		is_at_war = no
		NOT = {
			num_of_free_diplomatic_relations = 1
		}
		
		any_ally = {
			ai = yes
			NOT = {
				military_strength = {
					who = ROOT
					value = 0.1
				}
			}
		}
	}

	mean_time_to_happen = {
		months = 8
	}
	
	option = {
		name = "none"
		
		random_ally = {
			limit = {
				ai = yes
				NOT = {
					military_strength = {
						who = ROOT
						value = 0.1
					}
				}
			}
			break_alliance = ROOT
		}
	}
}

#set in empire if emperor and a neighbor is part of HRE

country_event = {
	id = general_ai.53
	title = none
	desc = none
	picture = none
	
	hidden = yes
	
	trigger = {
		ai = yes
		is_emperor = yes
		is_part_of_hre = no
		any_neighbor_country = {
			is_part_of_hre = yes
		}
	}

	mean_time_to_happen = {
		months = 8
	}
	
	option = {
		name = "none"
		
		ROOT = {
			set_in_empire = yes
		}
	}
}

country_event = {
	id = general_ai.55
	title = none
	desc = none
	picture = none
	
	#hidden = yes
	
	trigger = {
		ai = yes
		#is_great_power = yes
		treasury = 500
		NOT = { num_of_loans = 1 }
		has_regency = no
		is_subject = no
		OR = {
			is_female = no
			religion = anglican
		}
		OR = {
			religion_group = christian
			religion_group = muslim
		}
		is_defender_of_faith = no
		NOT = {
			any_country = {
				NOT = { religion = ROOT }
				military_strength = {
					who = ROOT
					value = 1
				}
			}
		}
	}

	mean_time_to_happen = {
		months = 60

		modifier = {
			factor = 0.5
			calc_true_if = {
				amount = 25
				all_country = {
					religion = ROOT
				}
			}
		}

		modifier = {
			factor = 0.25
			calc_true_if = {
				amount = 45
				all_country = {
					religion = ROOT
				}
			}
		}
	}
	
	option = {
		name = "none"
		
		add_treasury = -500
		set_defender_of_the_faith = {
			who = ROOT
			religion = ROOT
		}
	}
}

country_event = { #shitty monarch? get rid of him
	id = general_ai.57
	title = none
	desc = none
	picture = none
	
	#hidden = yes
	
	trigger = {
		ai = yes

		NOT = { has_government_attribute_short_desc = locked_government_type }
		is_emperor = no
		is_emperor_of_china = no
		NOT = { is_lesser_in_union = yes }
		stability = 2
		adm_power = 200

		dynasty_is_alone = yes
		government = monarchy
		OR = {
			NOT = {
				AND = {
					adm = 3
					dip = 3
					mil = 3
				}
			}
			AND = {
				adm = 3
				dip = 3
				mil = 3
				NOT = {
					ruler_age = 20
				}
				adm_tech = 20
			}
		}
		is_great_power = no
		NOT = { heir_adm = 2 }
		NOT = { heir_dip = 2 }
		NOT = { heir_mil = 2 }
		has_reform_on_level = 6
	}

	mean_time_to_happen = {
		months = 8
	}
	
	option = {
		name = "none"
		
		set_country_flag = populists_in_government
		add_stability = -3
		change_government = republic
	}
}

country_event = { #adhoc infinite money bug fix
	id = general_ai.58
	title = none
	desc = none
	picture = none
	
	hidden = yes
	
	trigger = {
		ai = yes
		treasury = 30000
	}

	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = "none"
		
		while = {
			limit = {
				treasury = 1
			}
			add_treasury = -1
		}
	}
}

country_event = { #adhoc infinite money bug fix
	id = general_ai.59
	title = none
	desc = none
	picture = none
	
	hidden = yes
	
	trigger = {
		ai = yes
		treasury = 900000
	}

	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = "none"
		
		add_treasury = -900000
		while = {
			limit = {
				treasury = 1
			}
			add_treasury = -1
		}
	}
}