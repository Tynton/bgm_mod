bgm_religion_change = {
	add_country_modifier = {
		name = recent_conversion
   		duration = 5475
	}
}

var_effect_h = {
    if = {
        limit = { check_variable = { which = $var$ value = $num$ } }
        subtract_variable = { which = $var$ value = $num$ }
        $effect$ = $sign$$num$
    }
}
var_effect = { #var #effect #sign ##positive only
    while = {
        limit = { check_variable = { which = $var$ value = 13107.2 } }
        subtract_variable = { which = $var$ value = 13107.2 }
        $effect$ = $sign$13107.2
    }
    var_effect_h = { sign=$sign$ var=$var$ effect=$effect$ num=6553.6 }
    var_effect_h = { sign=$sign$ var=$var$ effect=$effect$ num=3276.8 }
    var_effect_h = { sign=$sign$ var=$var$ effect=$effect$ num=1638.4 }
    var_effect_h = { sign=$sign$ var=$var$ effect=$effect$ num=819.2 }
    var_effect_h = { sign=$sign$ var=$var$ effect=$effect$ num=409.6 }
    var_effect_h = { sign=$sign$ var=$var$ effect=$effect$ num=204.8 }
    var_effect_h = { sign=$sign$ var=$var$ effect=$effect$ num=102.4 }
    var_effect_h = { sign=$sign$ var=$var$ effect=$effect$ num=51.2 }
    var_effect_h = { sign=$sign$ var=$var$ effect=$effect$ num=25.6 }
    var_effect_h = { sign=$sign$ var=$var$ effect=$effect$ num=12.8 }
    var_effect_h = { sign=$sign$ var=$var$ effect=$effect$ num=6.4 }
    var_effect_h = { sign=$sign$ var=$var$ effect=$effect$ num=3.2 }
    var_effect_h = { sign=$sign$ var=$var$ effect=$effect$ num=1.6 }
    var_effect_h = { sign=$sign$ var=$var$ effect=$effect$ num=0.8 }
    var_effect_h = { sign=$sign$ var=$var$ effect=$effect$ num=0.4 }
    var_effect_h = { sign=$sign$ var=$var$ effect=$effect$ num=0.2 }
    var_effect_h = { sign=$sign$ var=$var$ effect=$effect$ num=0.1 }
}

bgm_post_revolution = {
    if = {
        limit = {
            bgm_rev = yes
            has_parliament = no
        }
        change_government = futurist_government
        #add_government_reform = socialist_republic
    }
    if = {
        limit = {
            bgm_rev = yes
            has_parliament = yes
        }
        change_government = democracy_govt
        add_government_reform = bgm_dem_parliament
        add_faction_influence = {
            faction = dm_social_democrat
            influence = 40
        }
        add_faction_influence = {
            faction = dm_communist
            influence = 30
        }
        add_faction_influence = {
            faction = dm_monarchist
            influence = -100
        }
    }
    


    if = {
        limit = {
            bgm_rev = no
            has_parliament = yes
            government = monarchy
        }
        change_government = democracy_govt
        add_government_reform = parliamentary_monarchism
        add_government_reform = bgm_dem_parliament
        add_faction_influence = {
            faction = dm_social_conservative
            influence = 20
        }
        add_faction_influence = {
            faction = dm_monarchist
            influence = -10
        }
    }
    if = {
        limit = {
            bgm_rev = no
            has_parliament = yes
            government = republic
        }
        change_government = democracy_govt
        add_government_reform = parliamentary_republic_reform_bgm
        add_government_reform = bgm_dem_parliament
        add_faction_influence = {
            faction = dm_social_liberal
            influence = 20
        }
        add_faction_influence = {
            faction = dm_social_conservative
            influence = 20
        }
        add_faction_influence = {
            faction = dm_monarchist
            influence = -100
        }
    }




    if = {
        limit = {
            bgm_rev = no
            has_parliament = no
            government = monarchy
        }
        change_government = authoritarian_government
        add_government_reform = auth_monarchism
    }
    if = {
        limit = {
            bgm_rev = no
            has_parliament = no
            government = republic
            NOT = { has_reform = enlightened_republicanism_principle }
        }
        change_government = authoritarian_government
        add_government_reform = auth_republic_reform
    }
    if = {
        limit = {
            bgm_rev = no
            has_parliament = no
            government = republic
            has_reform = enlightened_republicanism_principle
        }
        change_government = futurist_government
        #add_government_reform = auth_republic_reform
    }
}

clear_advisors = {
    remove_advisor_by_category = adm
    remove_advisor_by_category = DIP
    remove_advisor_by_category = MIL
}

set_monarch_power = { #thanks Seelöwe
    if = {
        limit = {
            $type$_power = $value$
        }
        custom_tooltip = reset_powers
        hidden_effect = {
            add_$type$_power = -2000000
            add_$type$_power = $debt_limit$
            add_$type$_power = $value$
        }
    }
}

bgm_adm_assessment = {
    if = {
		limit = {
			NOT = {
				adm = 2
			}
		}
		add_country_modifier = {
			name = adm_one
			duration = -1
		}
		remove_country_modifier = adm_five
	}
	else_if = {
		limit = {
			adm = 2
			NOT = {
				adm = 5
			}
		}
		remove_country_modifier = adm_one
		remove_country_modifier = adm_five
	}
	else = {
		limit = {
			adm = 5
		}
		add_country_modifier = {
			name = adm_five
			duration = -1
		}
		remove_country_modifier = adm_one
	}
}
bgm_dip_assessment = {
    if = {
		limit = {
			NOT = {
				dip = 2
			}
		}
		add_country_modifier = {
			name = dip_one
			duration = -1
		}
		remove_country_modifier = dip_five
	}
	else_if = {
		limit = {
			dip = 2
			NOT = {
				dip = 5
			}
		}
		remove_country_modifier = dip_one
		remove_country_modifier = dip_five
	}
	else = {
		limit = {
			dip = 5
		}
		add_country_modifier = {
			name = dip_five
			duration = -1
		}
		remove_country_modifier = dip_one
	}
}  
bgm_mil_assessment = {
    if = {
		limit = {
			NOT = {
				mil = 2
			}
		}
		add_country_modifier = {
			name = mil_one
			duration = -1
		}
		remove_country_modifier = mil_five
	}
	else_if = {
		limit = {
			mil = 2
			NOT = {
				mil = 5
			}
		}
		remove_country_modifier = mil_one
		remove_country_modifier = mil_five
	}
	else = {
		limit = {
			mil = 5
		}
		add_country_modifier = {
			name = mil_five
			duration = -1
		}
		remove_country_modifier = mil_one
	}
}

bgm_get_fra = {
    random_country = {
        limit = {
            bgm_france = yes
        }
        save_event_target_as = bgm_fra_target
    }
}